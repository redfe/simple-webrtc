<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Simple WebRTC</title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.webrtc.ecl.ntt.com/skyway-latest.js"></script>
    <script type="text/javascript" src="key.js"></script>
    <script type="text/javascript" src="script.js"></script>
</head>

<body>
    <div>
        <!-- Steps -->
        <div id="steps">
            <h2>SkyWay Video Chat</h2>
            <div class="select">
                <label for="audioSource">Audio input source: </label><select id="audioSource"></select>
            </div>
            <div class="select">
                <label for="videoSource">Video source: </label><select id="videoSource"></select>
            </div>

            <!-- Get local audio/video stream -->
            <div id="step1">
                <p>Please click `allow` on the top of the screen so we can acces your webcam and microphone for calls.</p>
                <div id="step1-error">
                    <p>Failed to access the webcam and microphone. Make sure to run this demo on an http server and
                        click allow when asked for permission by the browser.</p>
                    <a href="#" class="pure-button pure-button-error" id="step1-retry">Try again.</a>
                </div>
            </div>

            <!-- API Key -->
            <div id="step2">
                <h3>Input API Key</h3>
                <form id="use-api-key">
                    <p>You can get API key from <a href="https://webrtc.ecl.ntt.com/" target="_blank">SkyWay</a>.</p>
                    <input type="text" placeholder="SkyWay API key" id="api-key">
                    <button class="pure-button pure-button-success" type="submit">Use</button>
                </form>
            </div>
            <div id="api-key-view">API Key: <span id="api-key-label"></span></div>


            <!-- Make calls to others -->
            <div id="step3">
                <h3>Make a call</h3>
                <form id="make-call" class="pure-form">
                    <input type="text" placeholder="Join room..." id="join-room">
                    <button class="pure-button pure-button-success" type="submit">Join</button>
                </form>
                <p><strong>Warning:</strong>You may connect with people you don't know if you both use the same room
                    name.</p>
            </div>

            <!-- Call in progress -->
            <div id="step4">
                <p>Currently in room <span id="room-id">...</span></p>
                <p><a href="#" class="pure-button pure-button-error" id="end-call">End call</a></p>
            </div>
        </div>

        <!-- Video area -->
        <div id="video-view-control">
            <div id="view-all" class="closed"></div>
            <div id="scroll-up"></div>
            <div id="scroll-down"></div>
        </div>
        <div id="video-container">
            <div>
                <label></label>
                <video id="my-video" muted="true" autoplay playsinline></video>
            </div>
        </div>
    </div>

</body>

</html>